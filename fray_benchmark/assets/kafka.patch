diff --git a/build.gradle b/build.gradle
index 3c202567b0..63501f6a4c 100644
--- a/build.gradle
+++ b/build.gradle
@@ -730,7 +730,7 @@ subprojects {
       jacoco {
         toolVersion = versions.jacoco
       }
-      
+
       jacocoTestReport {
         dependsOn tasks.test
         sourceSets sourceSets.main
@@ -754,8 +754,8 @@ subprojects {
     skipProjects = [ ":jmh-benchmarks", ":trogdor" ]
     skipConfigurations = [ "zinc" ]
   }
-  //  the task `removeUnusedImports` is implemented by google-java-format, 
-  //  and unfortunately the google-java-format version used by spotless 6.14.0 can't work with JDK 21. 
+  //  the task `removeUnusedImports` is implemented by google-java-format,
+  //  and unfortunately the google-java-format version used by spotless 6.14.0 can't work with JDK 21.
   //  Hence, we apply spotless tasks only if the env is either JDK11 or JDK17
   if ((JavaVersion.current().isJava11() || (JavaVersion.current() == JavaVersion.VERSION_17))) {
     apply plugin: 'com.diffplug.spotless'
@@ -1784,6 +1784,17 @@ project(':raft') {
   javadoc {
     enabled = false
   }
+
+  tasks.create(name: "copyDependencies", type: Copy) {
+    from (configurations.testRuntimeClasspath) {
+      include('*.jar')
+    }
+    into "$buildDir/dependency"
+    //By default gradle does not handle test dependencies between the sub-projects
+    //This line is to include clients project test jar to dependant-testlibs
+    from (project(':clients').testJar ) { "$buildDir/dependant-testlibs" }
+    duplicatesStrategy 'exclude'
+  }
 }
 
 project(':server-common') {
@@ -2352,6 +2363,27 @@ project(':streams') {
     exclude "**/org/apache/kafka/streams/internals/**", "**/org/apache/kafka/streams/**/internals/**"
   }
 
+  // Copy Java sources into the classes output dirs so build/classes/java contains both .class and .java
+  tasks.named('compileJava', JavaCompile).configure { JavaCompile t ->
+    doLast {
+      copy {
+        from(sourceSets.main.allSource.matching { include '**/*.java' })
+        // This is typically: streams/build/classes/java/main
+        into(t.destinationDirectory.get().asFile)
+      }
+    }
+  }
+
+  tasks.named('compileTestJava', JavaCompile).configure { JavaCompile t ->
+    doLast {
+      copy {
+        from(sourceSets.test.allSource.matching { include '**/*.java' })
+        // This is typically: streams/build/classes/java/test
+        into(t.destinationDirectory.get().asFile)
+      }
+    }
+  }
+
   tasks.create(name: "copyDependantLibs", type: Copy) {
     from (configurations.runtimeClasspath) {
       exclude('kafka-clients*')
@@ -2390,6 +2422,18 @@ project(':streams') {
     dependsOn testJar
   }
 
+  tasks.create(name: "copyDependencies", type: Copy) {
+    from (configurations.testRuntimeClasspath) {
+      include('*.jar')
+    }
+    into "$buildDir/dependency"
+    //By default gradle does not handle test dependencies between the sub-projects
+    //This line is to include clients project test jar to dependant-testlibs
+    from (project(':clients').testJar ) { "$buildDir/dependant-testlibs" }
+    duplicatesStrategy 'exclude'
+  }
+
+
   task genStreamsConfigDocs(type: JavaExec) {
     classpath = sourceSets.main.runtimeClasspath
     mainClass = 'org.apache.kafka.streams.StreamsConfig'
